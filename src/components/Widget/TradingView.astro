---
//<!--*         TradingView Widget --!>
//<!--!         No Errors!
//<!--TODO      Nothing for now!
//<!--*         [IMPORT]
//<!--?         Nothing to import for now
//<!--*         [DATA]
const {
  data,
  tail = "flex flex-col divide-y sm:px-8 lg:px-12 xl:px-32 divide-gray-700",
} = Astro.props;
---

<!-- Store the message prop as a data attribute. -->
<tv-widget data-data={data}>
  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
    <div id="tradingview_1fdf2" class="min-h-max h-96"></div>
    <div class="tradingview-widget-copyright">
      <a href="#tradingview" rel="noopener" target="_blank">
        <span class="blue-text">Stock charts {data}</span>
      </a> by TradingView
    </div>
    <script
      is:inline
      type="text/javascript"
      src="https://s3.tradingview.com/tv.js"
    ></script>
  </div>

  <script type="text/javascript">
    class TradingViewer extends HTMLElement {
      constructor() {
        super();
        const data = this.dataset.data;
        new TradingView.widget({
          autosize: true,
          symbol: data,
          interval: "D",
          timezone: "Etc/UTC",
          theme: "dark",
          style: "1",
          locale: "en",
          toolbar_bg: "#f1f3f6",
          enable_publishing: false,
          allow_symbol_change: true,
          container_id: "tradingview_1fdf2",
        });
      }
    }
    customElements.define("tv-widget", TradingViewer);
  </script>
  <!-- TradingView Widget END -->
</tv-widget>
